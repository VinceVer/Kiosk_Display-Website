doctype html
html(lang='en')
  head
    base(href=baseURL)
    meta(name="viewport" content="width=device-width, initial-scale=1")

    title Kiosk Display - #{config_data.location}

    link#themeLink(rel='stylesheet' href=`/stylesheets/theme-${layout.theme}.css`)
    link(rel='stylesheet' href='/stylesheets/desktop.css')
    link(rel='stylesheet' href='/stylesheets/desktop.anim.css')
  body.fade
    #brightnessFilter(style=`background-color: rgba(10, 10, 10, ${1 - layout.background_opacity / 100})`)
    #text_overlay TIMELINE

    nav#header
      button.HOME(onclick="location.href = '/desktop'") RETURN TO DISPLAY
      a.navLink(href="/desktop/layout") Change Layout
      .dropdown.navLink(style="padding-bottom: 0;") Data Analytics
        .content(style="margin-top: 7px;")
          div
            a.navLink.item(href="/desktop/data/gradient") Gradient Visualizer
          //div
            a.navLink.item(href="/desktop/data/logs") Event Logs
          div
            a.navLink.item(href="/desktop/data/reports") Report Generator
      a.navLink(href="/desktop/data/timeline") Timeline

      div#hookT1.hook(data-alt_align="start")
      div#hookT2.hook(data-alt_align="start")

    #display(style="visibility: hidden")
      .bar
      #container
      #overlay.clickToClose
        #devices.data
          h2 Connected Devices
        .info.clickToClose
          .banner
            h1
          .map
        #applications.data
          h2 Applications
      #footer
        .flexBar(style="display: inline-flex; gap: 0.25rem; margin: 0.25rem; width: fit-content")
          button.appButton#app_AButton(onclick="openCloseApp('app_A', this)" class=`${layout.app_A_display === "block" ? "selected" : ""}`) !
          button.appButton#app_5Button(onclick="openCloseApp('app_5', this)" class=`${layout.app_5_display === "block" ? "selected" : ""}`) ⚠
          button.appButton#app_TButton(onclick="openCloseApp('app_T', this)" class=`${layout.app_T_display === "block" ? "selected" : ""}`) ⧖
          button.appButton#app_HsButton(onclick="openCloseApp('app_Hs', this)" class=`${layout.app_Hs_display === "block" ? "selected" : ""}`) %
          //- button.appButton#app_iButton(title="Infographic Overlay" onclick="openCloseApp('app_i', this)" class=`${layout.app_i_display === "block" ? "selected" : ""}`) i
          //- button.appButton#app_RButton(onclick="openCloseApp('app_R', this)" class=`${layout.app_R_display === "block" ? "selected" : ""}`) R

        div#hookL.hook(data-alt_align="end")
        
        .center#time_selectors
          button(onclick="switchDay_Handler(-1)") &lt;
          input#time_slider(type="range" min=(new Date().setHours(0, 0, 0, 0) / 1000) max=((new Date().setHours(0, 0, 0, 0) / 1000) + 86400) value=(Math.floor((new Date()).getTime() / 1000)) step=300)
          button(onclick="switchDay_Handler(1)") &gt;
        .tooltip(for="time_slider")
          .tooltip-content Date
          .tooltip-arrow

        div#hookR.hook(data-alt_align="end")
    
    #app_5.app
      .header Reported Problems
        button(onclick="openCloseApp(this.parentNode.parentNode.id, document.getElementById(this.parentNode.parentNode.id+'Button'), true)") X
      p(style=`color: var(--text-color2)`) Reported Problems is disabled
    #app_Hs.app
      .header
        button(onclick="openCloseApp(this.parentNode.parentNode.id, document.getElementById(this.parentNode.parentNode.id+'Button'), true)") X
      p.health_score(style=`color: var(--text-color2)`) Health Score is disabled
    #app_T.app
      .header
        button(onclick="openCloseApp(this.parentNode.parentNode.id, document.getElementById(this.parentNode.parentNode.id+'Button'), true)") X
      p.last_check(style=`color: var(--text-color2)`) Last check is disabled
    #app_A.app
      .header Alert options
        button(onclick="openCloseApp(this.parentNode.parentNode.id, document.getElementById(this.parentNode.parentNode.id+'Button'), true)") X
      p(style=`color: var(--text-color2)`) Alert options is disabled
    //- #app_i.app
    //-   .header Display Info
    //-     button(onclick="openCloseApp(this.parentNode.parentNode.id, document.getElementById(this.parentNode.parentNode.id+'Button'), true)") X
    //-   .flexBar(style="margin: 10px 0 0 5px; width: fit-content")
    //-     select.i_type(style="margin-right: 5px" onchange="app_iHandler(this.parentNode)")
    //-       option(value="" selected disabled) Select Datatype
    //-       option(value="coupons_printed") Coupons Printed
    //-       option(value="tags_printed") Tags Printed
    //-       option(value="coupons_printed + tags_printed") Coupons + Tags Printed
    //-     select.i_time(onchange="app_iHandler(this.parentNode)")
    //-       option(value="" selected disabled) Select Time window
    //-       option(value="last24h") Last 24h
    //-       option(value="lastWeek") Last 7d
    //-       option(value="lastMonth") Last 30d
    //-       option(value="thisWeek") Current Week
    //-       option(value="thisMonth") Current Month

    #alertBox
      h2
      h4
      .flexBar
      .blockActions

    #segment_CM.contextMenu
      button.title
      //button Open analytics
      button(name="online") Change to Online
      button(name="status") Modify status messages
      button(name="remove") Remove from database

    #tile_CM.contextMenu
      button.title
      button(name="ignore") Ignore status
      button(name="online") Change to Online
      button(name="remove") Remove from database

    #templates(style="display: none")
      table
        tr#app_5Row
          td.name
          td.time
      #segment.segment
        .flexBar
          h3
          h4 test
        .content
          div
        h5 Last seen: 

    #data_storage(data-port=port data-config_data=config_data data-status_database=status_database data-misc_data=misc_data style="display: none")

    style.
      #time_selectors {
        align-items: center;
        bottom: 0;
        display: flex;
        gap: 5px;
        justify-content: center;

        & button {
          aspect-ratio: 4/5;
          background-color: var(--gray40);
          border: var(--border);
          border-radius: 3px;
          color: var(--text-color1);
          width: fit-content;

          &:hover {
            filter: invert(0.1);
          }
        }
      }

      #text_overlay {
        color: var(--gray10);
        font-size: 45rem;
        font-weight: bold;
        height: 100vh;
        left: 0;
        line-height: 100vh;
        opacity: 0.2;
        pointer-events: none;
        position: fixed;
        text-align: center;
        top: 0;
        whitespace: nowrap;
        width: fit-content;
        z-index: 1;
      }

      :root {
        --tag-size: #{layout.tag_size / 20 + "rem"};
        --tile-size: #{layout.tile_size / 20 + "rem"};
        --label-locations: #{layout.label_locations === "true" ? "inline-block" : "none"};
      }

      #app_5 {
        display: #{layout.app_5_display || "none"};
        height: #{layout.app_5_height || "fit-content"};
        left: #{layout.app_5_left || "10px"};
        bottom: #{layout.app_5_bottom || "calc(var(--footer-height) + 10px)"};
        width: #{layout.app_5_width || "fit-content"};
      }

      #app_Hs {
        display: #{layout.app_Hs_display || "none"};
        height: #{layout.app_Hs_height || "fit-content"};
        left: #{layout.app_Hs_left || "10px"};
        bottom: #{layout.app_Hs_bottom || "calc(var(--footer-height) + 10px)"};
        width: #{layout.app_Hs_width || "fit-content"};
      }

      #app_T {
        display: #{layout.app_T_display || "none"};
        height: #{layout.app_T_height || "fit-content"};
        left: #{layout.app_T_left || "10px"};
        bottom: #{layout.app_T_bottom || "calc(var(--footer-height) + 10px)"};
        width: #{layout.app_T_width || "fit-content"};
      }

      #app_A {
        display: #{layout.app_A_display || "none"};
        height: #{layout.app_A_height || "fit-content"};
        left: #{layout.app_A_left || "10px"};
        bottom: #{layout.app_A_bottom || "calc(var(--footer-height) + 10px)"};
        width: #{layout.app_A_width || "fit-content"};
      }

      #app_i {
        display: #{layout.app_i_display || "none"};
        height: #{layout.app_i_height || "fit-content"};
        left: #{layout.app_i_left || "10px"};
        bottom: #{layout.app_i_bottom || "calc(var(--footer-height) + 10px)"};
        width: #{layout.app_i_width || "fit-content"};
      }

      .kiosk.urgency_-1 {--identifier-opacity: #{layout.urgency_1_tag || 0};}
      .kiosk.urgency_0 {--identifier-opacity: #{layout.urgency0_tag || 0};}
      .kiosk.urgency_1 {--identifier-opacity: #{layout.urgency1_tag || 0};}
      .kiosk.urgency_2 {--identifier-opacity: #{layout.urgency2_tag || 0};}
      .kiosk.urgency_3 {--identifier-opacity: #{layout.urgency3_tag || 0};}
      .kiosk.urgency_4 {--identifier-opacity: #{layout.urgency4_tag || 0};}
      .kiosk.urgency_5 {--identifier-opacity: 1;}
      .kiosk.urgency_12 {--identifier-opacity: max(#{layout.urgency1_tag || 0}, #{layout.urgency2_tag || 0});}
      .kiosk.urgency_42 {--identifier-opacity: max(#{layout.urgency4_tag || 0}, #{layout.urgency2_tag || 0});}

      #time_slider {
        width: 30vw;
      }

    script(src='/javascripts/general-functions.js')
    script(src='/javascripts/desktop-data-timeline.js')
    script(src='/javascripts/desktop-home.anim.js')